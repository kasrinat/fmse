<!DOCTYPE html>
<html>
<head>
    <title>fMSE Polyfill - dash.js test page</title>
    <meta charset="UTF-8">
    <script src="../build/fMSE.js"></script>
    <script src="dash.all.debug.js"></script>

    <script src="../debug/build/BufferDisplay.js"></script>
</head>
<body>
    <div>
        <video id="videoPlayer" width="480" height="360"></video>
    </div>

    <div>
        <button onclick="v_play()">Play/Resume</button>
        <button onclick="v_pause()">Pause</button>
        <button onclick="v_seek()">Seek</button>
        <input type="text" id="seekTarget" maxlength="5" size="6"/>
    </div>

    <script>
        var polyfillSwfUrl = "../build/fMSE.swf";
        var videoElementId = "videoPlayer";
        var videoElement = document.getElementById(videoElementId);
        var forceFlashUsage = true;
        var seekTargetId = "seekTarget";
        var seekTarget = document.getElementById(seekTargetId);
        window.fMSE.init(polyfillSwfUrl, videoElement, initDashJS, forceFlashUsage);

        function initDashJS(video) {
            videoElement = video;
            console.log("initDashJS()", video);

            //var url = "http://media.streamroot.io/dash/examples/snow15/snowboard1_720p_dash.mpd";
            var url = "http://dash.edgesuite.net/envivio/Envivio-dash2/manifest.mpd";
            //var url = "http://dash.edgesuite.net/dash264/TestCases/1a/sony/SNE_DASH_SD_CASE1A_REVISED.mpd";
            //var url = "http://rdmedia.bbc.co.uk/dash/ondemand/testcard/1/client_manifest-events.mpd";
            var player = dashjs.MediaPlayer().create();
            var autoStart = true;
            player.initialize(video, url, autoStart);
        }

        function v_play() {
            videoElement.play();
        }

        function v_pause() {
            videoElement.pause();
        }

        function v_seek() {
            videoElement.currentTime = parseInt(seekTarget.value, 10);
        }
    </script>
</body>
</html>
